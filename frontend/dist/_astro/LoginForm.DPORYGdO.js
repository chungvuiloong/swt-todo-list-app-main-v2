import{c as L,a as N,g as d,t as f,b as a,i,d as t,m as p,o as j}from"./store.CkftJ29u.js";import{T as b}from"./TextInput.EjLKNjRL.js";import{u as k}from"./userState.CTXuh5W2.js";import{c as I,F as M,r as h,A as $}from"./FormError.D8Scyifd.js";import{u as U}from"./userActions.BFdptYXZ.js";var B=f('<div class="mt-4 flex justify-between"><!$><!/><!$><!/>'),D=f('<div class="flex w-9/12 max-w-xl flex-col justify-center"><div class="container prose mb-8"><h1>Welcome to Todo Manager</h1><p>Please login to use the application.</p><p>In case you do not have an account, you can register through <a href=/register>here</a> or through the button below on the left.</p></div><!$><!/><!$><!/>');function J(){const[l,{Form:v,Field:u}]=I(),[g,x]=k,[_,y]=L(),S=(e,s)=>{s.preventDefault(),console.log("submitting login form with values:",e),U.login(e).then(o=>{x(o),location.assign("/todos")}).catch(o=>{console.log("error:",o),y(o.message)})};return N(j(()=>g,e=>e&&e.username&&location.assign("/todos"))),!g.username&&(()=>{var e=d(D),s=e.firstChild,o=s.nextSibling,[m,w]=a(o.nextSibling),F=m.nextSibling,[E,P]=a(F.nextSibling);return i(e,t(M,{get error(){return _()},formName:"login"}),m,w),i(e,t(v,{onSubmit:S,"data-testid":"login-form",get children(){return[t(u,{name:"username",get validate(){return[h("Please enter your username.")]},children:(r,n)=>t(b,p(n,{label:"Username",type:"text",get value(){return r.value},get error(){return r.error},required:!0}))}),t(u,{name:"password",get validate(){return[h("Please enter your password.")]},children:(r,n)=>t(b,p(n,{label:"Password",type:"password",get value(){return r.value},get error(){return r.error},required:!0}))}),(()=>{var r=d(B),n=r.firstChild,[c,C]=a(n.nextSibling),T=c.nextSibling,[q,A]=a(T.nextSibling);return i(r,t($,{type:"button",get loading(){return l.submitting},label:"To Registration",variant:"secondary",onClick:()=>location.assign("/register")}),c,C),i(r,t($,{get loading(){return l.submitting},label:"Login",variant:"primary",type:"submit"}),q,A),r})()]}}),E,P),e})()}export{J as default};
