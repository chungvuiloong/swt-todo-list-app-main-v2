import{C as p,z as h,D as y,e as g}from"./store.BVrLplq6.js";var k=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),v=e=>(typeof e.clear=="function"||(e.clear=()=>{let t;for(;t=e.key(0);)e.removeItem(t)}),e),w=["domain","expires","path","secure","httpOnly","maxAge","sameSite"];function q(e){if(!e)return"";let t="";for(const r in e){if(!w.includes(r))continue;const n=e[r];t+=n instanceof Date?`; ${r}=${n.toUTCString()}`:typeof n=="boolean"?`; ${r}`:`; ${r}=${n}`}return t}function I(e,t){return e.match(`(^|;)\\s*${t}\\s*=\\s*([^;]+)`)?.pop()??null}var m;try{m=k("solid-start/server").useRequest}catch{m=()=>(console.warn("It seems you attempt to use cookieStorage on the server without having solid-start installed or use vite."),{request:{headers:{get:()=>""}}})}var i=v({_read:()=>document.cookie,_write:(e,t,r)=>{document.cookie=`${e}=${t}${q(r)}`},getItem:(e,t)=>I(i._read(t),e),setItem:(e,t,r)=>{i._write(e,t,r);{const s=Object.assign(new Event("storage"),{key:e,oldValue:null,newValue:t,url:globalThis.document.URL,storageArea:i});window.dispatchEvent(s)}},removeItem:(e,t)=>{i._write(e,"deleted",{...t,expires:new Date(0)})},key:(e,t)=>{let r=null,n=0;return i._read(t).replace(/(?:^|;)\s*(.+?)\s*=\s*[^;]+/g,(s,u)=>(!r&&u&&n++===e&&(r=u),"")),r},getLength:e=>{let t=0;return i._read(e).replace(/(?:^|;)\s*.+?\s*=\s*[^;]+/g,r=>(t+=r?1:0,"")),t},get length(){return this.getLength()}});function S(e,t={}){const r=t.storage||globalThis.localStorage;if(!r)return e;const n=t.storageOptions,s=t.name||`storage-${p()}`,u=t.serialize||JSON.stringify.bind(JSON),d=t.deserialize||JSON.parse.bind(JSON),a=r.getItem(s,n),f=typeof e[0]=="function"?o=>e[1](()=>d(o)):o=>e[1](y(d(o)));let l=!0;return a instanceof Promise?a.then(o=>l&&o&&f(o)):a&&f(a),[e[0],typeof e[0]=="function"?o=>{const c=e[1](o);return o?r.setItem(s,u(c),n):r.removeItem(s,n),l=!1,c}:(...o)=>{e[1](...o);const c=u(h(()=>e[0]));r.setItem(s,c,n),l=!1}]}const _=S(g({userId:null,username:null,accessToken:null,refreshToken:null}),{name:"userData"});export{S as m,_ as u};
