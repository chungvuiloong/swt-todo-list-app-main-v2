import{c as q,a as N,g as d,t as $,b as i,i as l,d as t,m as p,o as U}from"./store.CkftJ29u.js";import{T as h}from"./TextInput.EjLKNjRL.js";import{u as j}from"./userState.CTXuh5W2.js";import{c as k,F as I,r as b,A as f}from"./FormError.D8Scyifd.js";import{u as L}from"./userActions.BFdptYXZ.js";function M(s,u){return o=>o?.length&&o.length<s?u:""}var B=$('<div class="mt-4 flex justify-between"><!$><!/><!$><!/>'),D=$('<div class="flex max-w-xl flex-col justify-center"><div class="container prose mb-8"><h1>Register an account</h1><p>An account is needed to use the Todo Manager.</p><p>In case you already have an account, please login through <a href=/login>here</a> or through the button below on the left.</p></div><!$><!/><!$><!/>');function K(){const[s,{Form:u,Field:o}]=k(),[v,x]=j,[_,y]=q(),S=(e,g)=>{g.preventDefault(),console.log("submitting register form with values:",e),L.createUser(e).then(n=>{x(n),location.assign("/todo-lists")}).catch(n=>{console.log("error:",n),y(n.message)})};return N(U(()=>v,e=>e&&e.username&&location.assign("/todos"))),(()=>{var e=d(D),g=e.firstChild,n=g.nextSibling,[c,w]=i(n.nextSibling),F=c.nextSibling,[E,A]=i(F.nextSibling);return l(e,t(I,{get error(){return _()},formName:"login"}),c,w),l(e,t(u,{onSubmit:S,"data-testid":"register-form",get children(){return[t(o,{name:"username",get validate(){return[b("Please enter your username.")]},children:(r,a)=>t(h,p(a,{label:"Username",type:"text",get value(){return r.value},get error(){return r.error},required:!0}))}),t(o,{name:"password",get validate(){return[b("Please enter your password."),M(8,"You password must have 8 characters or more.")]},children:(r,a)=>t(h,p(a,{label:"Password",type:"password",get value(){return r.value},get error(){return r.error},required:!0}))}),(()=>{var r=d(B),a=r.firstChild,[m,C]=i(a.nextSibling),P=m.nextSibling,[R,T]=i(P.nextSibling);return l(r,t(f,{type:"button",get loading(){return s.submitting},label:"To Login",variant:"secondary",onClick:()=>location.assign("/login")}),m,C),l(r,t(f,{get loading(){return s.submitting},label:"Register",variant:"primary"}),R,T),r})()]}}),E,A),e})()}export{K as default};
